---
# Deploy Access Management Playbook (FBC mode)
# Deploys AM with File-Based Configuration

- name: Deploy Access Management (FBC Mode)
  hosts: access_management
  become: yes
  gather_facts: yes

  pre_tasks:
    - name: Include common role for prerequisites
      include_role:
        name: common

  roles:
    - role: tomcat
      tags:
        - tomcat
    - role: access-management
      vars:
        am_deployment_mode: "fbc"
      tags:
        - am
        - access-management
        - fbc

  post_tasks:
    - name: Display deployment summary
      debug:
        msg: "Access Management (FBC) deployment completed. AM is available at {{ am_url }}"

